<!DOCTYPE html><head><meta charset="UTF-8"><title>Preconditioning System | Chamois</title><link rel="icon" type="image/x-icon" href="../../media/chamois_logo.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down">Chamois</a><a href="https://github.com/matthiasneuner/chamois" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="../../getting_started.html">Getting Started</a></li><li><a href="../../singularity.html">Singularity container</a></li><li><a href="../../publications.html">Publications</a></li><li><a href="../../contributors.html">Contributors</a></li><li><a href="#!" class="dropdown-trigger" data-target="62115cb3-a68a-4f95-8fa8-952110cc09be" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li></ul><a href="#" class="sidenav-trigger" data-target="c38ea325-9509-4c17-99d4-654ba66fe37e"><i class="material-icons">menu</i></a><ul class="sidenav" id="c38ea325-9509-4c17-99d4-654ba66fe37e"><li><a href="../../getting_started.html">Getting Started</a></li><li><a href="../../singularity.html">Singularity container</a></li><li><a href="../../publications.html">Publications</a></li><li><a href="../../contributors.html">Contributors</a></li><li><a href="#!" class="dropdown-trigger" data-target="4e52805c-c2e8-4943-83af-9774f9775cdf" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="62115cb3-a68a-4f95-8fa8-952110cc09be"><li><a href="../chamois.html">Chamois syntax</a></li></ul><ul class="dropdown-content" id="4e52805c-c2e8-4943-83af-9774f9775cdf"><li><a href="../chamois.html">Chamois syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="0d81f579-a10f-4b3a-987f-7c236e8080e1" data-section-level="1" data-section-text="Preconditioning System"><h1 id="preconditioning-system">Preconditioning System</h1><section id="f2737422-94c7-48bb-bb72-59fa791d0ae3" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>See <a href="../../source/executioners/Steady.html">Steady</a> for more details on how preconditioning is used in solving nonlinear systems in MOOSE. The <code>Preconditioning</code> block allows you to define which type of preconditioning matrix to build and what process to apply. You can define multiple blocks with different names, allowing you to quickly switch out preconditioning options. Within the sub-blocks you can also provide other options specific to that type of preconditioning matrix. You can also override PETSc options here. Only one block can be active at a time.</p></section><section id="781f1cdc-1088-4d4d-81b8-0c1b90a9b00c" data-section-level="2" data-section-text="Default Preconditioning Matrix"><h2 id="default-preconditioning-matrix">Default Preconditioning Matrix</h2><p>Consider the fully coupled system of equations:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-52cb769d-280a-4011-9a77-f9f215817cb8"></span><script>var element = document.getElementById("moose-equation-52cb769d-280a-4011-9a77-f9f215817cb8");katex.render("\\begin{aligned} \\nabla \\cdot k(s,T) \\nabla T  &= 0 \\\\ \\nabla \\cdot D(s,T) \\nabla s  &= 0 , \\end{aligned},", element, {displayMode:true,throwOnError:false});</script></span><p>the fully coupled Jacobian is then approximated using a block-diagonal approach:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-e6801131-a1d9-4d31-b1a5-49569a644909"></span><script>var element = document.getElementById("moose-equation-e6801131-a1d9-4d31-b1a5-49569a644909");katex.render("\\boldsymbol{R}'(s,T) =  \\begin{bmatrix}    (\\boldsymbol{R}_T)_T & (\\boldsymbol{R}_T)_s    \\\\    (\\boldsymbol{R}_s)_T & (\\boldsymbol{R}_s)_s  \\end{bmatrix}  \\approx  \\begin{bmatrix}    (\\boldsymbol{R}_T)_T & \\boldsymbol{0}    \\\\    \\boldsymbol{0}       & (\\boldsymbol{R}_s)_s  \\end{bmatrix} .", element, {displayMode:true,throwOnError:false});</script></span><p>Thus, for this example, the default preconditioning matrix is defined as:</p><span class="moose-katex-block-equation"><span class="moose-katex-equation table-cell" id="moose-equation-74eaa6d0-c801-48f6-9991-5160b43fe40d"></span><script>var element = document.getElementById("moose-equation-74eaa6d0-c801-48f6-9991-5160b43fe40d");katex.render("\\boldsymbol{M} \\equiv     \\begin{bmatrix}       (k(s,T) \\nabla \\phi_j, \\nabla \\psi_i) & \\boldsymbol{0} \\\\       \\boldsymbol{0} & (D(s,T) \\nabla \\phi_j, \\nabla\\psi_i)     \\end{bmatrix} \\approx \\boldsymbol{R}'(s,T) .", element, {displayMode:true,throwOnError:false});</script></span></section><section id="11ef87c8-300b-4c93-89f5-88e7497a2393" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><pre class="moose-pre" style="max-height:350px;"><code class="language-None">[Preconditioning]
  active = &#x27;my_prec&#x27;

  [my_prec]
    type = SMP
    # SMP Options Go Here!
    # Override PETSc Options Here!
  []

  [other_prec]
    type = PBP
    # PBP Options Go Here!
    # Override PETSc Options Here!
  []
[]
</code></pre></section><section id="7b93ac95-c46f-4781-8945-9742635d7d6f" data-section-level="2" data-section-text="Available Objects"><h2 id="available-objects">Available Objects</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/splits/Split.html">Split</a>Field split based preconditioner for nonlinear solver.</li><li class="collection-item"><a href="../../source/preconditioners/FiniteDifferencePreconditioner.html">FDP</a>Finite difference preconditioner (FDP) builds a numerical Jacobian for preconditioning, only use for testing and verification.</li><li class="collection-item"><a href="../../source/preconditioners/FieldSplitPreconditioner.html">FSP</a>Preconditioner designed to map onto PETSc&#x27;s PCFieldSplit.</li><li class="collection-item"><a href="../../source/preconditioners/PhysicsBasedPreconditioner.html">PBP</a>Physics-based preconditioner (PBP) allows individual physics to have their own preconditioner.</li><li class="collection-item"><a href="../../source/preconditioners/SingleMatrixPreconditioner.html">SMP</a>Single matrix preconditioner (SMP) builds a preconditioner using user defined off-diagonal parts of the Jacobian.</li><li class="collection-item"><a href="../../source/preconditioners/VariableCondensationPreconditioner.html">VCP</a>Varialble condensation preconditioner (VCP) condenses out specified variable(s) from the Jacobian matrix and produces a system of equations with less unkowns to be solved by the underlying preconditioners.</li></ul></section><section id="38ea53c1-ce46-4373-9f26-0a34bf8046dc" data-section-level="2" data-section-text="Available Actions"><h2 id="available-actions">Available Actions</h2><ul class="moose-syntax-list collection with-header"><li class="collection-header">Moose App</li><li class="collection-item"><a href="../../source/actions/SetupPreconditionerAction.html">SetupPreconditionerAction</a>Add a Preconditioner object to the simulation.</li><li class="collection-item"><a href="../../source/actions/AddFieldSplitAction.html">AddFieldSplitAction</a>Add a Split object to the simulation.</li></ul></section></section></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>